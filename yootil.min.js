/**
* http://pixeldepth.net / http://sz-ex.com / http://yootil.pixeldepth.net - Ver: 0.8.3
*/
yootil=function(){return{host:location.hostname,html_encode:function(e){return e=e?e:"",$("<div />").text(e).html()},html_decode:function(e){return e=e?e:"",$("<div />").html(e).text()},number_format:function(e,t){return e=e?e:"",t=t?t:",",e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)||"0"},is_json:function(e,t){try{e=JSON.parse(e)}catch(n){return!1}return t?e:!0}}}(),yootil.key=function(){return{pb_key_obj:proboards.plugin.key,exists:function(e){return e&&this.pb_key_obj&&this.pb_key_obj(e)?!0:!1},get_key:function(e){return this.exists(e)?this.pb_key_obj(e):!1},has_value:function(e,t){if(this.exists(e)&&typeof this.pb_key_obj(e).get!="undefined"){var n=this.pb_key_obj(e).get(t||undefined);if(n&&n.toString().length)return!0}return!1},value:function(e,t,n){if(this.exists(e)&&this.has_value(e,t)){var r=this.pb_key_obj(e).get(t||undefined);return n&&(r=JSON.parse(r)),r}return""},clear:function(e,t){return this.set(e,"",t),this},set:function(e,t,n,r){if(this.exists(e)){r&&(t=JSON.stringify(t));if(typeof n=="undefined"||!n||!n.toString().length)n=t,t=undefined;this.pb_key_obj(e).set(n,t)}return this},write:function(e,t){return this.exists(e)?!!this.pb_key_obj(e).can_write(t):!1},read:function(e,t){return this.exists(e)?!!this.pb_key_obj(e).can_read(t):!1}}}(),yootil.create=function(){return{container:function(e,t,n,r,i,s,o,u){var a="",f=safe_content=typeof n!="undefined"||n?!0:!1;return e=e||"",t=t||"",typeof n=="object"&&(typeof n.title!="undefined"&&(f=n.title),typeof n.content!="undefined"&&(safe_content=n.content)),s=s?s:{},r=r?r:{},i=i?i:{},e=f?this.make_safe(e):e,e=typeof o!="undefined"&&!o?e:"<h2>"+e+"</h2>",t=safe_content?this.make_safe(t):t,a+='<div class="container">',a+=$('<div class="title-bar">'+e+"</div>").css(r).wrap("<span/>").parent().html(),a+=$('<div class="content pad-all">'+t+"</div>").css(i).wrap("<span/>").parent().html(),a+="</div>",typeof u=="undefined"||u?$(a).css(s):$(a).css(s).wrap("<span/>").parent().html()},page:function(e,t,n){var r=e.constructor==RegExp?e:new RegExp("/"+e,"i");return e&&location.href.match(r)&&(typeof t!="undefined"&&t.length&&(document.title+=" - "+t),(typeof n=="undefined"||n)&&$("#content[role=main]").children().hide()),yootil.create},nav_branch:function(e,t){var n=$("#nav-tree li:last").clone();return n&&n.length&&(n.find("a").attr("href",e).find("span").html(t),n.appendTo("#nav-tree")),n}}}(),yootil.user=function(){return{data:{},has_data:function(){if(this.data&&typeof this.data.id!="undefined")return!0;if(typeof proboards!="undefined"){var e=proboards.data;if(typeof e!="undefined"&&typeof e=="function"){var t=proboards.data("user");if(typeof t!="undefined")return this.data=t,!0}}return!1},logged_in:function(){return this.has_data()&&typeof this.data.is_logged_in!="undefined"&&this.data.is_logged_in?!0:!1},id:function(){return this.has_data()&&typeof this.data.id!="undefined"?this.data.id:0},is_staff:function(){return this.has_data()&&typeof this.data.is_staff!="undefined"&&this.data.is_staff?!0:!1},name:function(){return this.has_data()&&typeof this.data.name!="undefined"?this.data.name:""},theme:function(){return this.has_data()&&typeof this.data.theme_id!="undefined"?this.data.theme_id:0},url:function(){return this.has_data()&&typeof this.data.url!="undefined"?this.data.url:""}}}(),yootil.ajax=function(){return{bind:function(e,t,n,r,i){var s=$(t);return e="ajax"+e.substr(0,1).toUpperCase()+e.substr(1),s.length==1&&(i=i?i:t,e&&n&&t.length&&s[e](function(e,s,o){(r===!0||(new RegExp(r,"i")).test(o.url))&&$.proxy(n,i,e,s,o,t)()})),yootil}}}(),yootil.sound=function(){return{audio_obj:null,play:function(e){$.browser.msie?(this.audio_obj||(this.audio_obj=$('<bgsound src="#" autostart="true" loop="1" width="1" height="1" id="yootil_sound_player">').appendTo($("body"))),this.audio_obj.attr("src",e)):(this.audio_obj&&this.audio_obj.remove(),this.audio_obj=$('<embed src="'+e+'" autostart="true" width="1" loop="1" height="1" id="yootil_sound_player">').appendTo($("body")))}}}(),yootil.storage=function(){var e={},t=!1;if(Modernizr.sessionstorage&&Modernizr.localstorage)t=!0;else{var n=window.name||"";if(n&&!n.length){var r;if(r=yootil.is_json(n,!0))e=r}}return{window_data:e,html5:t,set:function(e,t,n,r){return e&&t&&(t=n?JSON.stringify(t):t),r?yootil.storage.persistent.set(e,t):yootil.storage.session.set(e,t),this},get:function(e,t,n){var r="";return e&&(n?r=yootil.storage.persistent.get(e):r=yootil.storage.session.get(e),typeof n=="undefined"&&!r&&(r=yootil.storage.persistent.get(e)),t&&(r=JSON.parse(r))),r},remove:function(e,t){return e&&(t?yootil.storage.persistent.remove(e):yootil.storage.session.remove(e),typeof t=="undefined"&&yootil.storage.persistent.remove(e)),this}}}(),yootil.storage.persistent=function(){var e;return yootil.storage.html5||(e=$("<link />")[0],e&&e.addBehavior&&($(e).css("behavior","url(#default#userData)"),$("head").append($(e)),e.load("yootil"))),{set:function(t,n){return e?(e.setAttribute(t,n),e.save()):yootil.storage.html5&&localStorage.setItem(t,n),this},get:function(t){var n="";return e?n=e.getAttribute(t):yootil.storage.html5&&localStorage.length&&(n=localStorage.getItem(t)),n},remove:function(t){return e?e.removeAttribute(t):yootil.storage.html5&&localStorage.length&&localStorage.removeItem(t),this}}}(),yootil.storage.session=function(){function e(){yootil.storage.window_data&&(window.name=JSON.stringify(yootil.storage.window_data))}return{set:function(t,n){return yootil.storage.html5?sessionStorage.setItem(t,n):(yootil.storage.window_data[yootil.host]||(yootil.storage.window_data[yootil.host]={}),yootil.storage.window_data[yootil.host][t]=n,e()),this},get:function(e){var t="";return yootil.storage.html5&&sessionStorage.length?t=sessionStorage.getItem(e):yootil.storage.window_data&&yootil.storage.window_data[yootil.host]&&yootil.storage.window_data[yootil.host][e]&&(t=yootil.storage.window_data[yootil.host][e]),t},remove:function(t){return yootil.storage.html5&&sessionStorage.length?sessionStorage.removeItem(t):yootil.storage.window_data&&yootil.storage.window_data[yootil.host]&&(delete yootil.storage.window_data[yootil.host],e()),this}}}(),yootil.location=function(){return{}},yootil.location.check=function(){return{__is_page:function(e){return proboards.data&&proboards.data("route")&&proboards.data("route").name==e},board:function(){return this.__is_page("board")},bookmarks:function(){return this.__is_page("bookmarks")},calendar:function(){return this.__is_page("calendar")||this.__is_page("calendar_month")},calendar_day:function(){return this.__is_page("calendar_day")},forum:function(){return this.__is_page("home")||this.__is_page("forum")},members:function(){return this.__is_page("members")},message_list:function(){return this.__is_page("conversations")},message_thread:function(){return this.__is_page("conversation")},messaging:function(){return this.message_new()||this.conversation_new()||this.conversation_create()},message_new:function(){return this.__is_page("new_message")},conversation_new:function(){return this.__is_page("new_conversation")||this.__is_page("create_conversation")},conversation_create:function(){return this.__is_page("create_conversation")},posting:function(){return this.posting_quote()||this.posting_reply()||this.posting_thread()},posting_quote:function(){return this.__is_page("quote_posts")},posting_reply:function(){return this.__is_page("new_post")},posting_thread:function(){return this.__is_page("new_thread")},editing_post:function(){return this.__is_page("edit_post")},editing_thread:function(){return this.__is_page("edit_thread")},editing:function(){return this.editing_thread()||this.editing_post()},profile_activity:function(){return this.__is_page("show_user_activity")},profile_following:function(){return this.__is_page("show_user_following")},profile_friends:function(){return this.__is_page("show_user_friends")},profile_gift:function(){return this.__is_page("show_user_gift")},profile_groups:function(){return this.__is_page("show_user_groups")},profile_home:function(){return this.__is_page("user")},profile_edit_admin:function(){return this.__is_page("edit_user_admin")},profile_edit_avatar:function(){return this.__is_page("edit_user_avatar")},profile_edit_badges:function(){return this.__is_page("edit_user_badges")},profile_edit_notifications:function(){return this.__is_page("edit_user_notifications")},profile_edit_personal:function(){return this.__is_page("edit_user_personal")},profile_edit_privacy:function(){return this.__is_page("edit_user_privacy")},profile_edit_settings:function(){return this.__is_page("edit_user_settings")},profile_edit_social:function(){return this.__is_page("edit_user_social")},profile_notifications:function(){return this.__is_page("show_user_notifications")},recent_posts:function(){return this.__is_page("all_recent_posts")||this.__is_page("recent_posts")},recent_threads:function(){return this.__is_page("recent_threads")},search:function(){return this.__is_page("search")},search_results:function(){return this.__is_page("search_results")},thread:function(){return this.__is_page("thread")}}}(),yootil.user.action=function(){var e="lastaction",t="";return $(function(){var n=function(t){return function(){yootil.storage.set(e,t)}};t=yootil.storage.get(e),yootil.storage.set(e,""),yootil.location.check.conversation_new()&&t=="created_conversation"&&(t=""),$(".form_thread_new").submit(n("created_thread")),$(".form_post_new").submit(n("replied")),$(".form_conversation_new").submit(n("created_conversation")),$(".form_message_new").submit(n("sent_message")),yootil.location.check.message_thread()?$(".form_post_quick_reply").submit(n("sent_message")):yootil.location.check.thread()&&$(".form_post_quick_reply").submit(n("replied"))}),{created_conversation:function(){return t=="created_conversation"},created_thread:function(){return t=="created_thread"},pmed:function(){return this.created_conversation()||this.sent_message()},posted:function(){return this.created_thread()||this.replied()},replied:function(){return t=="replied"},sent_message:function(){return t=="sent_message"}}}(),yootil.form=function(){return{post_form:function(){return yootil.location.check.posting_thread()?$("form.form_thread_new"):$("form.form_post_new")},quick_reply_form:function(){return $("form.form_post_quick_reply")},post_quick_reply_form:function(){return yootil.location.check.thread()?this.quick_reply_form():[]},shoutbox_form:function(){return $("form.form_shoutbox_shoutbox")},conversation_form:function(){return yootil.location.check.message_new()?this.message_form():this.conversation_new_form()},conversation_new_form:function(){return $("form.form_conversation_new")},message_form:function(){return $("form.form_message_new")}}}(),yootil.page=function(){return{__get_data:function(e){return proboards&&proboards.dataHash&&proboards.dataHash.page&&typeof proboards.dataHash.page[e]!="undefined"?proboards.dataHash.page[e]:""}}}(),yootil.page.category=function(){return{__get_data:function(e){var t=yootil.page.__get_data("category");return t&&typeof t=="object"&&t[e]!="undefined"?t[e]:""},id:function(){return this.__get_data("id")},name:function(){return this.__get_data("name")}}}(),yootil.page.board=function(){return{__get_data:function(e){var t=yootil.page.__get_data("board");return t&&typeof t=="object"&&t[e]!="undefined"?t[e]:""},id:function(){return this.__get_data("id")},name:function(){return this.__get_data("name")},url:function(){return this.__get_data("url")}}}();