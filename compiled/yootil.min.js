"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var yootil=function(){function yootil(){_classCallCheck(this,yootil)}_createClass(yootil,null,[{key:"init",value:function init(){this._PLUGIN="pixeldepth_yootil";this._called=this.timestamp();this._version="{VER}";this._notifications_queue={};this._months=["January","February","March","April","May","June","July","August","September","October","November","December"];this._days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this._textarea=document.createElement("textarea");this.settings.init();this.setup();this.bar.init()}},{key:"setup",value:function setup(){var plugin=pb.plugin.get(this._PLUGIN);var settings=plugin&&plugin.settings?plugin.settings:false;if(settings){this.settings.bar.enabled=settings.bar_enabled==1?!!settings.bar_enabled:true;this.settings.bar.position=settings.bar_position>0?~~settings.bar_position:4;if(plugin.images){this.settings.images=plugin.images}}}},{key:"html_encode",value:function html_encode(){var str=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var decode_first=arguments.length<=1||arguments[1]===undefined?false:arguments[1];str=decode_first?this.html_decode(str):str;return $("<div />").text(str).html()}},{key:"html_decode",value:function html_decode(){var str=arguments.length<=0||arguments[0]===undefined?"":arguments[0];this._textarea.innerHTML=str;var val=this._textarea.value;this._textarea.innerHTML="";return val}},{key:"number_format",value:function number_format(){var str=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var delim=arguments.length<=1||arguments[1]===undefined?",":arguments[1];return str.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+delim)||"0"}},{key:"is_json",value:function is_json(){var str=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var return_obj=arguments.length<=1||arguments[1]===undefined?false:arguments[1];try{str=JSON.parse(str)}catch(e){return false}if(return_obj){return str}return true}},{key:"timestamp",value:function timestamp(){return+new Date}},{key:"suffix",value:function suffix(){var n=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var j=n%10;if(j==1&&n!=11){return"st"}if(j==2&&n!=12){return"nd"}if(j==3&&n!=13){return"rd"}return"th"}},{key:"day",value:function day(){var index=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var full=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(index>=0&&index<this._days.length){return this._days[index].substr(0,full?9:3)}return""}},{key:"month",value:function month(){var index=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var full=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(index>=0&&index<this._months.length){return this._months[index].substr(0,full?9:index==8?4:3)}return""}},{key:"compare_version",value:function compare_version(){var current=arguments.length<=0||arguments[0]===undefined?"0.0.0":arguments[0];var required=arguments.length<=1||arguments[1]===undefined?"0.0.0":arguments[1];current=current.toString();required=required.toString();if(current.length>required.length){required+=".0".repeat(current.replace(/\D/g,"").length-required.replace(/\D/g,"").length)}else if(required.length>current.length){current+=".0".repeat(required.replace(/\D/g,"").length-current.replace(/\D/g,"").length)}var a=current.split(".");var b=required.split(".");var len=a.length;for(var i=0;i<len;i++){if(~~a[i]>~~b[i]){return 1}if(~~a[i]<~~b[i]){return-1}}return 0}},{key:"images",get:function get(){return this._images}},{key:"version",get:function get(){return this._version}},{key:"days",get:function get(){return this._days}},{key:"months",get:function get(){return this._months}},{key:"called",get:function get(){return this._called}}]);return yootil}();yootil.animation=function(){function _class(){var _this=this;var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$callback=_ref.callback;var callback=_ref$callback===undefined?null:_ref$callback;var _ref$duration=_ref.duration;var duration=_ref$duration===undefined?0:_ref$duration;var _ref$start=_ref.start;var start=_ref$start===undefined?false:_ref$start;_classCallCheck(this,_class);if(!callback){console.error("yootil.animation constructor: No callback passed")}this._anim_id=0;this._callback=callback;this._start=start;this._duration=duration;this._time_start=0;this._anim_func=function(current_time){if(!_this._time_start){_this._time_start=current_time}if(duration&&current_time-_this._time_start>duration){return}_this._callback(_this,_this._time_start,current_time,_this._duration,_this._anim_id);_this._anim_id=requestAnimationFrame(_this._anim_func)};if(this._start){this.start()}}_createClass(_class,[{key:"repeat",value:function repeat(){if(this._anim_id){this._time_start=0;this._anim_func()}}},{key:"start",value:function start(){if(!this._anim_id){this._anim_id=requestAnimationFrame(this._anim_func)}}},{key:"stop",value:function stop(){if(this._anim_id){cancelAnimationFrame(this._anim_id);this._anim_id=0}}}]);return _class}();yootil.bar=function(){function _class2(){_classCallCheck(this,_class2)}_createClass(_class2,null,[{key:"init",value:function init(){if(!yootil.settings.bar.enabled){return}this.setup();this.create_bar();this._items=new Map}},{key:"setup",value:function setup(){var position=yootil.settings.bar_position;this._settings={enabled:yootil.settings.bar.enabled,position:"yootil-bar-bottom-left",setting:position,custom:null};switch(position){case 1:this._settings.position="yootil-bar-top-left";break;case 2:this._settings.position="yootil-bar-top-center";this._settings.custom={left:$(window).width()/2};break;case 3:this._settings.position="yootil-bar-top-right";break;case 4:this._settings.position="yootil-bar-bottom-left";break;case 5:this._settings.position="yootil-bar-bottom-center";this._settings.custom={left:$(window).width()/2};break;case 6:this._settings.position="yootil-bar-bottom-right";break;case 7:this._settings.position="yootil-bar-left-middle";this._settings.custom={top:$(window).height()/2};break;case 8:this._settings.position="yootil-bar-right-middle";this._settings.custom={top:$(window).height()/2};break}}},{key:"add",value:function add(){var link=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var img=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var alt=arguments.length<=2||arguments[2]===undefined?"":arguments[2];var key=arguments.length<=3||arguments[3]===undefined?"":arguments[3];var func=arguments.length<=4||arguments[4]===undefined?null:arguments[4];var context=arguments.length<=5||arguments[5]===undefined?null:arguments[5];if(!this._settings.enabled){return}if(link&&img){var line_break="";if(this._settings.position==7||this._settings.position==8){line_break="<br />"}var $item=$("<a href='"+link+"'><img src='"+img+"' alt='"+alt+"' title='"+alt+"' />"+line_break+"</a>");if(line_break.length){$item.addClass("yootil-bar-item-block")}if(func&&typeof func=="function"){$item.click(func.bind(context))}if(key&&key.toString().length){this._items.set(key,$item)}this._plugin_bar.find("#yootil-bar").append($item);this.reposition_top();this.reposition_left()}if(this._plugin_bar.find("#yootil-bar a").length>0){this._plugin_bar.show()}return this}},{key:"remove",value:function remove(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];key=key.toString();if(key&&this._items.has(key)){this._items.get(key).remove();this._items.delete(key);if(this._plugin_bar.find("#yootil-bar a").length==0){this._plugin_bar.css("display","none")}else{this.reposition_left();this.reposition_top()}}return this}},{key:"enabled",value:function enabled(){return yootil.settings.bar.enabled}},{key:"total_items",value:function total_items(){return this._items.length}},{key:"reposition_left",value:function reposition_left(){var position=this._settings.bar_position;if(position==2||position==5){this._plugin_bar.css("left",$(window).width()/2-this._plugin_bar.width()/2)}}},{key:"reposition_top",value:function reposition_top(){var position=yootil.settings.bar.position;if(position==7||position==8){this._plugin_bar.css("top",$(window).height()/2-this._plugin_bar.height()/2)}}},{key:"create_bar",value:function create_bar(){var $bar=$("<div id='yootil-bar-wrapper'><div id='yootil-bar'></div></div>").addClass(this._settings.position);if(this._settings.custom){$bar.css(this._settings.custom)}if(this._settings.setting==6){if($("#pbn-bar-wrapper").length){$bar.addClass("yootil-bar-offset")}}$(function(){return $("body").append($bar)});this._plugin_bar=$bar}},{key:"settings",get:function get(){return this._settings}}]);return _class2}();yootil.clock=function(){function _class3(){var start=arguments.length<=0||arguments[0]===undefined?false:arguments[0];var seconds=arguments.length<=1||arguments[1]===undefined?true:arguments[1];_classCallCheck(this,_class3);this._start=this._old=this._elapsed=0;this._running=start?true:false;this._seconds=seconds;if(start){this.start()}}_createClass(_class3,[{key:"start",value:function start(){this._start=this._old=performance.now();this._running=true}},{key:"stop",value:function stop(){this.delta();this._running=false}},{key:"resume",value:function resume(){this._running=true}},{key:"elapsed",value:function elapsed(){this.delta();return this._elapsed}},{key:"delta",value:function delta(){var diff=0;if(this._running){var new_time=performance.now();diff=new_time-this._old;if(this._seconds){diff/=1e3}this._old=new_time;this._elapsed+=diff}return diff}}]);return _class3}();yootil.create=function(){function _class4(){_classCallCheck(this,_class4)}_createClass(_class4,null,[{key:"container",value:function container(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$title=_ref2.title;var title=_ref2$title===undefined?"":_ref2$title;var _ref2$h=_ref2.h2;var h2=_ref2$h===undefined?true:_ref2$h;var _ref2$content=_ref2.content;var content=_ref2$content===undefined?"":_ref2$content;var html="";title=!h2?title:"<h2>"+title+"</h2>";html+='<div class="container">';html+='<div class="title-bar">'+title+"</div>";html+='<div class="content pad-all">'+content+"</div>";html+="</div>";return $(html)}},{key:"page",value:function page(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref3$pattern=_ref3.pattern;var pattern=_ref3$pattern===undefined?null:_ref3$pattern;var _ref3$title=_ref3.title;var title=_ref3$title===undefined?"":_ref3$title;var _ref3$hide_content=_ref3.hide_content;var hide_content=_ref3$hide_content===undefined?true:_ref3$hide_content;if(!pattern){return this}var reg=pattern.constructor==RegExp?pattern:new RegExp("/?"+pattern,"i");if(pattern&&location.href.match(reg)){if(typeof title!="undefined"&&title.length){document.title+=" - "+title}if(typeof hide_content=="undefined"||hide_content){$("#content").children().hide()}}return this}},{key:"nav_branch",value:function nav_branch(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref4$url=_ref4.url;var url=_ref4$url===undefined?"/":_ref4$url;var _ref4$text=_ref4.text;var text=_ref4$text===undefined?"":_ref4$text;var $branch=yootil.get.last_nav_branch().clone();if($branch.length){$branch.find("a").attr("href",url).find("span").html(text);$branch.appendTo(yootil.get.nav_tree())}return $branch}},{key:"profile_tab",value:function profile_tab(){var _ref5=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref5$text=_ref5.text;var text=_ref5$text===undefined?"":_ref5$text;var _ref5$page=_ref5.page;var page=_ref5$page===undefined?"/":_ref5$page;var _ref5$active=_ref5.active;var active=_ref5$active===undefined?false:_ref5$active;if(yootil.location.profile()){var active_class=active?" class='ui-active'":"";var $ul=$("div.show-user div.ui-tabMenu:first ul");if($ul.length){$ul.append($("<li"+active_class+"><a href='/user/"+yootil.page.member.id()+"/"+page+"'>"+text+"</a></li>"))}}return this}},{key:"profile_content_box",value:function profile_content_box(){var id=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var uid=id||$.unique_id("yootil-");return $("<div />").addClass("content-box center-col").attr("id",uid)}},{key:"bbc_button",value:function bbc_button(){var _ref6=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref6$img=_ref6.img;var img=_ref6$img===undefined?"":_ref6$img;var _ref6$func=_ref6.func;var func=_ref6$func===undefined?null:_ref6$func;$(function(){var $li=$("<li>").addClass("button").append($(img));if(func){$li.click(func)}var $controls=$(".editor .ui-wysiwyg .controls");var $ul=$controls.find(".bbcode-editor, .visual-editor").find(".group:last ul:last");if($controls.length&&$ul.length){$ul.append($li)}});return this}},{key:"bbc_tab",value:function bbc_tab(){var _ref7=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref7$title=_ref7.title;var title=_ref7$title===undefined?"My Tab":_ref7$title;var _ref7$content=_ref7.content;var content=_ref7$content===undefined?"":_ref7$content;var _ref7$id=_ref7.id;var id=_ref7$id===undefined?"":_ref7$id;var _ref7$css=_ref7.css;var css=_ref7$css===undefined?null:_ref7$css;var _ref7$events=_ref7.events;var events=_ref7$events===undefined?{}:_ref7$events;id=id||yootil.timestamp();var $wysiwyg_tabs=$(".editor ul.wysiwyg-tabs");var $tab=$("<li id='menu-item-"+id+"'><a href='#'>"+title+"</a></li>");var $tab_content=$("<div id='"+id+"'>"+content+"</div>");$wysiwyg_tabs.append($tab);if(css&&(typeof css==="undefined"?"undefined":_typeof(css))=="object"){$tab_content.css(css)}else{$tab_content.css({border:"1px solid #E6E6E6",padding:"5px"})}$tab_content.hide().insertBefore($wysiwyg_tabs);$wysiwyg_tabs.find("li").click(function(e){var $active=$(this);e.preventDefault();$active.parent().find("li").removeClass("ui-active");$active.addClass("ui-active");$active.parent().find("li").each(function(){var id=$(this).attr("id");if(id.match(/bbcode|visual/i)){$(".editor .ui-wysiwyg .editors").hide()}else{if($active.attr("id")==id){return}var _selector="";if(id){_selector="#"+id.split("menu-item-")[1]}if($(_selector).length){if(events&&events.hide){if(events.context){events.hide.bind(events.context)($tab,$tab_content)}else{events.hide($tab,$tab_content)}}$(_selector).hide()}}});var id=$active.attr("id");var selector="";if(id){selector="#"+id.split("menu-item-")[1]}if(id.match(/bbcode|visual/i)){$(".editor .ui-wysiwyg .editors").show()}else if($(selector).length){console.log(events);if(events&&events.show){if(events.context){events.show.bind(events.context)($tab,$tab_content)}else{events.show($tab,$tab_content)}}$(selector).show()}});return $tab_content}}]);return _class4}();yootil.event=function(){function _class5(){_classCallCheck(this,_class5)}_createClass(_class5,null,[{key:"init",value:function init(){proboards.events.post_liked=[];proboards.events.post_likedOne=[];proboards.events.bookmarked_thread=[];proboards.events.bookmarked_threadOne=[];proboards.events.updated_status=[];proboards.events.updated_statusOne=[];proboards.events.shoutbox_shouted=[];proboards.events.shoutbox_shoutedOne=[];proboards.events.shoutbox_updated=[];proboards.events.shoutbox_updatedOne=[];proboards.events.shoutbox_removed=[];proboards.events.shoutbox_removedOne=[];proboards.events.user_searched=[];proboards.events.user_searchedOne=[];$.ajaxPrefilter(function(opts,orig_opts){var orig_success=orig_opts.success;var evt="";switch(orig_opts.url){case proboards.routeMap["post_like"]:evt="post_liked";break;case proboards.routeMap["bookmark_threads"]:evt="bookmarked_thread";break;case proboards.routeMap["update_status"]:evt="updated_status";break;case proboards.routeMap["shoutbox_add"]:evt="shoutbox_shouted";break;case proboards.routeMap["shoutbox_update"]:evt="shoutbox_updated";break;case proboards.routeMap["shoutbox_remove"]:evt="shoutbox_removed";break;case proboards.routeMap["user_search"]:evt="user_searched";break}if(evt){opts.success=function(){orig_success.bind(this)(arguments);proboards.events.run(evt,{args:arguments})}}});return this}},{key:"after_search",value:function after_search(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("afterSearch",context?func.bind(context):func);return this}},{key:"column_sort",value:function column_sort(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("columnSort",context?func.bind(context):func);return this}},{key:"more_activity",value:function more_activity(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("moreActivity",context?func.bind(context):func);return this}},{key:"more_notification",value:function more_notification(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("moreNotification",context?func.bind(context):func);return this}},{key:"page_change",value:function page_change(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("pageChange",context?func.bind(context):func);return this}},{key:"post_liked",value:function post_liked(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("post_liked",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"bookmarked_thread",value:function bookmarked_thread(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("bookmarked_thread",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"updated_status",value:function updated_status(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("updated_status",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"shoutbox_shouted",value:function shoutbox_shouted(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("shoutbox_shouted",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"shoutbox_updated",value:function shoutbox_updated(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("shoutbox_updated",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"shoutbox_removed",value:function shoutbox_removed(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("shoutbox_removed",function(){(context?func.bind(context):func)(this.args||[])});return this}},{key:"user_searched",value:function user_searched(func){var context=arguments.length<=1||arguments[1]===undefined?null:arguments[1];proboards.on("user_searched",function(){(context?func.bind(context):func)(this.args||[])});return this}}]);return _class5}().init();yootil.extension=function(){function _class6(){_classCallCheck(this,_class6)}_createClass(_class6,null,[{key:"init",value:function init(){this._plugin_extensions=new Map;return this}},{key:"create",value:function create(){var plugin=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var ext_key=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var klass=arguments.length<=2||arguments[2]===undefined?null:arguments[2];if(!plugin||!key||!klass){return}var plugin_name=plugin.toUpperCase()+"_EXTENSIONS";var ext_name=ext_key.toUpperCase();if(!this._plugin_extensions.has(plugin_name)){this._plugin_extensions.set(plugin_name,new Map)}this._plugin_extensions.get(plugin_name).set(ext_name,klass);return this}},{key:"run",value:function run(){var _this2=this;var plugin=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var methods=Object.create(null);methods.pre_inits=function(){if(!_this2.plugin_exists(plugin)){return}var exts=_this2.fetch(plugin);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=exts[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var ext_name=_step$value[0];var klass=_step$value[1];if(typeof klass.pre_init!="undefined"){klass.pre_init()}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}};methods.inits=function(){if(!_this2.plugin_exists(plugin)){return}var exts=_this2.fetch(plugin);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=exts[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var ext_name=_step2$value[0];var klass=_step2$value[1];if(typeof klass.init!="undefined"){klass.init()}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}};methods.post_inits=function(){if(!_this2.plugin_exists(plugin)){return}var exts=_this2.fetch(plugin);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=exts[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var ext_name=_step3$value[0];var klass=_step3$value[1];if(typeof klass.post_init!="undefined"){klass.post_init()}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}};methods.ready=function(){if(!_this2.plugin_exists(plugin)){return}var exts=_this2.fetch(plugin);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=exts[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2);var ext_name=_step4$value[0];var klass=_step4$value[1];if(typeof klass.ready!="undefined"){klass.ready()}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}};return methods}},{key:"plugin_exists",value:function plugin_exists(){var plugin=arguments.length<=0||arguments[0]===undefined?"":arguments[0];return this._plugin_extensions.has(plugin.toUpperCase()+"_EXTENSIONS")}},{key:"exists",value:function exists(){var plugin=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var ext_name=arguments.length<=1||arguments[1]===undefined?"":arguments[1];if(this.plugin_exists(plugin)){return this._plugin_extensions.get(plugin.toUpperCase()+"_EXTENSIONS").has(ext_name.toUpperCase())}return false}},{key:"fetch",value:function fetch(){var plugin=arguments.length<=0||arguments[0]===undefined?"":arguments[0];if(this.plugin_exists(plugin)){return this._plugin_extensions.get(plugin.toUpperCase()+"_EXTENSIONS")}return null}},{key:"plugin_extensions",get:function get(){return this._plugin_extensions}}]);return _class6}().init();yootil.forum=function(){function _class7(){_classCallCheck(this,_class7)}_createClass(_class7,null,[{key:"__get_data",value:function __get_data(key){if(proboards&&proboards.dataHash&&typeof proboards.dataHash[key]!="undefined"){return proboards.dataHash[key]}return""}},{key:"ad_free",value:function ad_free(){return this.__get_data("ad_free")==1}},{key:"default_avatar",value:function default_avatar(){return this.__get_data("default_avatar")}},{key:"id",value:function id(){return this.__get_data("forum_id")}},{key:"login_url",value:function login_url(){return this.__get_data("login_url")}},{key:"guest",value:function guest(){return this.__get_data("is_current_user_guest")==1}},{key:"mark_boards_read_url",value:function mark_boards_read_url(){return this.__get_data("mark_boards_read_url")}},{key:"max_key_length",value:function max_key_length(){return this.__get_data("plugin_max_key_length")}},{key:"max_super_forum_key_length",value:function max_super_forum_key_length(){return this.__get_data("plugin_max_super_forum_key_length")}},{key:"register_url",value:function register_url(){return this.__get_data("register_url")}},{key:"new_post_image",value:function new_post_image(){return this.__get_data("home_new_post_src")}},{key:"image_path",value:function image_path(){return this.__get_data("image_path")}},{key:"locale_settings",value:function locale_settings(){return this.__get_data("locale_settings")||{}}},{key:"military_time",value:function military_time(){return this.__get_data("military_time")}},{key:"max_search_query",value:function max_search_query(){return this.__get_data("search-query-max")}},{key:"min_search_query",value:function min_search_query(){return this.__get_data("search-query-min")}},{key:"server_date",value:function server_date(){return this.__get_data("serverDate")}},{key:"time_style",value:function time_style(){return this.__get_data("time_style")}},{key:"time_zone",value:function time_zone(){return this.__get_data("timezone")}},{key:"csrf_token",value:function csrf_token(){return this.__get_data("csrf_token")}}]);return _class7}();yootil.get=function(){function _class8(){_classCallCheck(this,_class8)}_createClass(_class8,null,[{key:"mini_profiles",value:function mini_profiles(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(a.user-link.user-"+id+")":"";return $(".item .mini-profile"+selector)}},{key:"mini_profile_avatars",value:function mini_profile_avatars(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(a.user-link.user-"+id+")":"";return $(".item .mini-profile .avatar"+selector)}},{key:"mini_profile_user_links",value:function mini_profile_user_links(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?".user-"+id:"";return $(".item .mini-profile a.user-link"+selector)}},{key:"posts",value:function posts(){var post_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(post_id,10);var selector=id?"-"+id:"";return $("tr.item[id^=post"+selector+"]")}},{key:"messages",value:function messages(){var message_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(message_id,10);var selector=id?"-"+id:"";return $("tr.item[id^=message"+selector+"]")}},{key:"user_posts",value:function user_posts(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);if(!id){return[]}return $("tr.item[id^=post]:has(.mini-profile a.user-link.user-"+id+")")}},{key:"user_messages",value:function user_messages(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);if(!id){return[]}return $("tr.item[id^=message]:has(.mini-profile a.user-link.user-"+id+")")}},{key:"quick_reply",value:function quick_reply(){return $(".quick-reply")}},{key:"mini_profile_info",value:function mini_profile_info(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(a.user-link.user-"+id+")":"";return $(".item .mini-profile"+selector+" .info")}},{key:"signatures",value:function signatures(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(.mini-profile a.user-link.user-"+id+")":"";return $("tr.item[id^=post-]"+selector+" .foot .signature, tr[id^=message-]"+selector+" .foot .signature")}},{key:"last_edit",value:function last_edit(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(.mini-profile a.user-link.user-"+id+")":"";return $("tr.item[id^=post-]"+selector+" .foot .edited_by, tr[id^=message-]"+selector+" .foot .edited_by")}},{key:"post_info",value:function post_info(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(.mini-profile a.user-link.user-"+id+")":"";return $("tr.item[id^=post-]"+selector+" .content .info, tr[id^=message-]"+selector+" .content .info")}},{key:"post_controls",value:function post_controls(){var user_id=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var id=parseInt(user_id,10);var selector=id?":has(.mini-profile a.user-link.user-"+id+")":"";return $("tr.item[id^=post-]"+selector+" .controls, tr[id^=message-]"+selector+" .controls")}},{key:"summary",value:function summary(){return $(".messages.summary, .posts.summary")}},{key:"nav_tree",value:function nav_tree(){return $("#navigation-tree").find("#nav-tree")}},{key:"nav_branches",value:function nav_branches(){return this.nav_tree().find(".nav-tree-branch")}},{key:"last_nav_branch",value:function last_nav_branch(){return this.nav_tree().find(".nav-tree-branch:last")}},{key:"nav_branch",value:function nav_branch(){var pattern=arguments.length<=0||arguments[0]===undefined?null:arguments[0];var type=arguments.length<=1||arguments[1]===undefined?"text":arguments[1];if(!pattern){return[]}var matched=[];$("#navigation-tree").find(".nav-tree-branch a").each(function(){var match_against=type=="url"?$(this).attr("href"):$(this).text();if(pattern.constructor==RegExp){if(pattern.test(match_against)){matched.push($(this).parent().parent())}}else if(typeof pattern=="string"){if(match_against.indexOf(pattern)!=-1){matched.push($(this).parent().parent())}}});return matched}}]);return _class8}();yootil.key=function(){function _class9(){_classCallCheck(this,_class9)}_createClass(_class9,null,[{key:"init",value:function init(){this.pb_key_obj=pb.plugin.key;return this.wrapper.bind(this)}},{key:"wrapper",value:function wrapper(){var _this3=this;var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];return Object.assign(Object.create(null),{exists:function exists(){return _this3.exists(key)},obj:function obj(){return _this3.key_obj(key)},is_empty:function is_empty(user_id){return _this3.is_empty(key,user_id)},has_value:function has_value(user_id){return!_this3.is_empty(key,user_id)},get:function get(user_id,is_json){return _this3.get(key,user_id)},clear:function clear(user_id){return _this3.clear(key,user_id)},set:function set(value,user_id,type){return _this3.set(key,value,user_id,type);
},on:function on(evt,value,user_id){return _this3.on(key,evt,value,user_id)},new_thread:function new_thread(value,user_id){return _this3.new_thread(key,value,user_id)},new_post:function new_post(value,user_id){return _this3.new_post(key,value,user_id)},new_quick_reply:function new_quick_reply(value,user_id){return _this3.post_quick_reply(key,value,user_id)},append:function append(value,user_id){return _this3.append(key,value,user_id)},prepend:function prepend(value,user_id){return _this3.prepend(key,value,user_id)},increment:function increment(value,user_id){return _this3.increment(key,value,user_id)},decrement:function decrement(value,user_id){return _this3.decrement(key,value,user_id)},pop:function pop(items,user_id){return _this3.pop(key,items,user_id)},push:function push(value,user_id){return _this3.push(key,value,user_id)},push_unique:function push_unique(value,user_id,strict){return _this3.push_unique(key,value,user_id,strict)},shift:function shift(items,user_id){return _this3.shift(key,items,user_id)},unshift:function unshift(value,user_id){return _this3.unshift(key,value,user_id)},unshift_unique:function unshift_unique(value,user_id,strict){return _this3.unshift_unique(key,value,user_id,strict)},write:function write(user_id){return _this3.write(key,user_id)},read:function read(user_id){return _this3.read(key,user_id)},type:function type(user_id,return_str){return _this3.type(key,return_str)},length:function length(user_id){return _this3.length(key,user_id)},user_key:function user_key(){return _this3.user_key(key)},super_user_key:function super_user_key(){return _this3.super_user_key(key)},thread_key:function thread_key(){return _this3.thread_key(key)},post_key:function post_key(){return _this3.post_key(key)},conversation_key:function conversation_key(){return _this3.conversation_key(key)},message_key:function message_key(){return _this3.message_key(key)},super_forum_key:function super_forum_key(){return _this3.super_forum_key(key)},has_space:function has_space(user_id){return _this3.has_space(key,user_id)},space_left:function space_left(user_id){return _this3.space_left(key,user_id)}})}},{key:"exists",value:function exists(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];if(key){if(typeof proboards.plugin._keys[key]!="undefined"){return true}}return false}},{key:"key_obj",value:function key_obj(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];if(this.exists(key)){return this.pb_key_obj(key)}return{}}},{key:"is_empty",value:function is_empty(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var user=arguments.length<=1||arguments[1]===undefined?0:arguments[1];if(this.exists(key)){if(typeof this.pb_key_obj(key).get!="undefined"){var val=this.pb_key_obj(key).get(user||undefined);if(val&&val.toString().length){return false}}}return true}},{key:"get",value:function get(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var user=arguments[1];var is_json=arguments.length<=2||arguments[2]===undefined?false:arguments[2];if(this.exists(key)){if(!this.is_empty(key,user)){var value=this.pb_key_obj(key).get(user||undefined);if(is_json&&yootil.is_json(value)){value=JSON.parse(value)}return value}}return""}},{key:"clear",value:function clear(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var user=arguments[1];return this.set(key,"",user)}},{key:"set",value:function set(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var value=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var _this4=this;var user_id=arguments[2];var type=arguments.length<=3||arguments[3]===undefined?"":arguments[3];var p=new Promise(function(resolve,reject){if(_this4.exists(key)){var options={object_id:user_id,value:value};options.error=function(status){reject(status)};options.success=function(status){resolve(status)};if(type){switch(type){case"push":case"unshift":if(Array.isArray(options.value)&&options.value.length>1){options.values=options.value;delete options.value}break;case"pop":case"shift":if(options.value){options.num_items=~~options.value;delete options.value}break}_this4.pb_key_obj(key)[type](options)}else{_this4.pb_key_obj(key).set(options)}}else{reject({message:"Key does not exist"})}});return p}},{key:"on",value:function on(key){var event=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var value=arguments[2];var user_id=arguments[3];if(!event){return false}return this.pb_key_obj(key).set_on(event,user_id,value)}},{key:"new_thread",value:function new_thread(key,value,user_id){return this.on(key,"thread_new",value,user_id)}},{key:"new_post",value:function new_post(key,value,user_id){return this.on(key,"post_new",value,user_id)}},{key:"post_quick_reply",value:function post_quick_reply(key,value,user_id){return this.on(key,"post_quick_reply",value,user_id)}},{key:"append",value:function append(key,value,user_id){return this.set(key,value,user_id,"append")}},{key:"prepend",value:function prepend(key,value,user_id){return this.set(key,value,user_id,"prepend")}},{key:"increment",value:function increment(key){var value=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var user_id=arguments[2];return this.set(key,value,user_id,"increment")}},{key:"decrement",value:function decrement(key){var value=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var user_id=arguments[2];return this.set(key,value,user_id,"decrement")}},{key:"pop",value:function pop(key){var num_items=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var user_id=arguments[2];return this.set(key,num_items,user_id,"pop")}},{key:"push",value:function push(key,value,user_id){value=Array.isArray(value)&&value.length==1?value[0]:value;return this.set(key,value,user_id,"push")}},{key:"push_unique",value:function push_unique(key,value,user_id){var strict=arguments.length<=3||arguments[3]===undefined?false:arguments[3];var current_value=this.value(key);if(!current_value||!Array.isArray(current_value)){current_value=[]}var new_values=[];if(typeof value!="undefined"){if(Array.isArray(value)){new_values=value}else{new_values.push(value)}}if(new_values.length){var to_push=[];var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{var _loop=function _loop(){var item=_step5.value;var af=strict?function(val){return val===item}:function(val){return val==item};if(!current_value.find(af)){to_push.push(item)}};for(var _iterator5=new_values[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){_loop()}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}if(to_push.length){to_push=to_push.length==1?to_push[0]:to_push;return this.push(key,to_push,user_id)}}}},{key:"shift",value:function shift(key){var num_items=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var user_id=arguments[2];return this.set(key,num_items,user_id,"shift")}},{key:"unshift",value:function unshift(key,value,user_id){value=Array.isArray(value)&&value.length==1?value[0]:value;return this.set(key,value,user_id,"unshift")}},{key:"unshift_unique",value:function unshift_unique(key,value,user_id){var strict=arguments.length<=3||arguments[3]===undefined?false:arguments[3];var current_value=this.value(key);if(!current_value||!Array.isArray(current_value)){current_value=[]}var new_values=[];if(typeof value!="undefined"){if(Array.isArray(value)){new_values=value}else{new_values.push(value)}}if(new_values.length){var to_push=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{var _loop2=function _loop2(){var item=_step6.value;var af=strict?function(val){return val===item}:function(val){return val==item};if(!current_value.find(af)){to_push.push(item)}};for(var _iterator6=new_values[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){_loop2()}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}if(to_push.length){to_push=to_push.length==1?to_push[0]:to_push;return this.unshift(key,to_push,user_id)}}}},{key:"write",value:function write(key,user){if(this.exists(key)){if(typeof this.pb_key_obj(key).can_write!="undefined"){return!!this.pb_key_obj(key).can_write(user)}else{return true}}return false}},{key:"read",value:function read(key,user){if(this.exists(key)){if(typeof this.pb_key_obj(key).can_read!="undefined"){return!!this.pb_key_obj(key).can_read(user)}else{return true}}return false}},{key:"type",value:function type(key){var return_str=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var type=this.pb_key_obj(key).type();if(return_str){var types=pb.plugin.key_types();for(var k in types){if(types[k]==type){type=k;break}}}return type}},{key:"length",value:function length(key,user){var val=this.get(key,user);if(typeof val=="string"){return val.length}return JSON.stringify(val).length}},{key:"user_key",value:function user_key(key){if(this.type(key)==1){return true}return false}},{key:"super_user_key",value:function super_user_key(key){if(this.type(key)==2){return true}return false}},{key:"thread_key",value:function thread_key(key){if(this.type(key)==3){return true}return false}},{key:"post_key",value:function post_key(key){if(this.type(key)==4){return true}return false}},{key:"conversation_key",value:function conversation_key(key){if(this.type(key)==5){return true}return false}},{key:"message_key",value:function message_key(key){if(this.type(key)==6){return true}return false}},{key:"super_forum_key",value:function super_forum_key(key){if(this.type(key)==7){return true}return false}},{key:"has_space",value:function has_space(key,user){var max_length=this.super_forum_key(key)?pb.data("plugin_max_super_forum_key_length"):pb.data("plugin_max_key_length");if(this.length(key,user)<max_length){return true}return false}},{key:"space_left",value:function space_left(key,user){var max_length=this.super_forum_key(key)?pb.data("plugin_max_super_forum_key_length"):pb.data("plugin_max_key_length");var key_length=this.length(key,user);var space_left=max_length-key_length;return space_left<0?0:space_left}}]);return _class9}().init();yootil.location=function(){function _class10(){_classCallCheck(this,_class10)}_createClass(_class10,null,[{key:"init",value:function init(){this._cached_route=pb.data&&pb.data("route")?pb.data("route").name:"";return this}},{key:"__is_page",value:function __is_page(id){return this._cached_route==id}},{key:"board",value:function board(){return this.__is_page("board")||this.__is_page("list_threads")}},{key:"bookmarks",value:function bookmarks(){return this.__is_page("bookmarks")}},{key:"calendar",value:function calendar(){return this.__is_page("calendar")||this.__is_page("calendar_month")||this.__is_page("calendar_list")}},{key:"calendar_day",value:function calendar_day(){return this.__is_page("calendar_day")}},{key:"forum",value:function forum(){return this.__is_page("forum")}},{key:"home",value:function home(){return this.__is_page("home")||this.__is_page("forum")}},{key:"members",value:function members(){return this.__is_page("members")||this.__is_page("list_members")}},{key:"message_list",value:function message_list(){return this.__is_page("conversations")||this.__is_page("conversations_inbox")||this.__is_page("list_conversations")}},{key:"message_thread",value:function message_thread(){return this.__is_page("conversation")||this.__is_page("list_messages")}},{key:"messaging",value:function messaging(){return this.message_new()||this.conversation_new()||this.message_quote()}},{key:"message_new",value:function message_new(){return this.__is_page("new_message")}},{key:"message_quote",value:function message_quote(){return this.__is_page("quote_messages")}},{key:"conversation_new",value:function conversation_new(){return this.__is_page("new_conversation")||this.__is_page("create_conversation")||this.__is_page("conversation_new_user")}},{key:"conversation_create",value:function conversation_create(){return this.__is_page("create_conversation")}},{key:"conversation_new_user",value:function conversation_new_user(){return this.__is_page("new_user_conversation")}},{key:"posting",value:function posting(){return this.posting_quote()||this.posting_reply()||this.posting_thread()}},{key:"posting_quote",value:function posting_quote(){return this.__is_page("quote_posts")}},{key:"posting_reply",value:function posting_reply(){return this.__is_page("new_post")}},{key:"posting_thread",value:function posting_thread(){return this.__is_page("new_thread")}},{key:"editing_post",value:function editing_post(){return this.__is_page("edit_post")}},{key:"editing_thread",value:function editing_thread(){return this.__is_page("edit_thread")}},{key:"editing",value:function editing(){return this.editing_thread()||this.editing_post()}},{key:"page",value:function page(){return this.__is_page("page")}},{key:"permalink",value:function permalink(){return this.__is_page("permalink")}},{key:"permalink_post",value:function permalink_post(){if(this.permalink()){var params=pb.data("route").params;if(params&&params.post_id){return true}}return false}},{key:"profile_activity",value:function profile_activity(){return this.__is_page("show_user_activity")}},{key:"profile_following",value:function profile_following(){return this.__is_page("show_user_following")}},{key:"profile_friends",value:function profile_friends(){return this.__is_page("show_user_friends")}},{key:"profile_gift",value:function profile_gift(){return this.__is_page("show_user_gift")}},{key:"profile_groups",value:function profile_groups(){return this.__is_page("show_user_groups")}},{key:"profile_home",value:function profile_home(){return this.__is_page("user")}},{key:"profile_exists",value:function profile_exists(){return yootil.page.member.exists()}},{key:"profile_edit_admin",value:function profile_edit_admin(){return this.__is_page("edit_user_admin")}},{key:"profile_edit_avatar",value:function profile_edit_avatar(){return this.__is_page("edit_user_avatar")}},{key:"profile_edit_badges",value:function profile_edit_badges(){return this.__is_page("edit_user_badges")}},{key:"profile_edit_notifications",value:function profile_edit_notifications(){return this.__is_page("edit_user_notifications")}},{key:"profile_edit_personal",value:function profile_edit_personal(){return this.__is_page("edit_user_personal")}},{key:"profile_edit_privacy",value:function profile_edit_privacy(){return this.__is_page("edit_user_privacy")}},{key:"profile_edit_settings",value:function profile_edit_settings(){return this.__is_page("edit_user_settings")}},{key:"profile_edit_social",value:function profile_edit_social(){return this.__is_page("edit_user_social")}},{key:"profile_notifications",value:function profile_notifications(){return this.__is_page("show_user_notifications")||this.__is_page("show_more_notifications")}},{key:"profile",value:function profile(){return this.profile_activity()||this.profile_following()||this.profile_friends()||this.profile_gift()||this.profile_groups()||this.profile_home()||this.profile_notifications()}},{key:"recent_posts",value:function recent_posts(){return this.__is_page("all_recent_posts")||this.__is_page("recent_posts")}},{key:"ip_posts",value:function ip_posts(){return this.__is_page("posts_by_ip")}},{key:"posts",value:function posts(){return this.recent_posts()||this.ip_threads()}},{key:"recent_threads",value:function recent_threads(){return this.__is_page("recent_threads")||this.__is_page("recent_threads_created")}},{key:"ip_threads",value:function ip_threads(){return this.__is_page("threads_by_ip")}},{key:"threads",value:function threads(){return this.recent_threads()||this.ip_threads()}},{key:"search",value:function search(){return this.__is_page("search")}},{key:"search_results",value:function search_results(){return this.__is_page("search_results")}},{key:"thread",value:function thread(){return this.__is_page("thread")||this.__is_page("list_posts")||this.permalink_post()}}]);return _class10}().init();yootil.page=function(){function _class11(){_classCallCheck(this,_class11)}_createClass(_class11,null,[{key:"__get_data",value:function __get_data(key){if(proboards&&proboards.dataHash&&proboards.dataHash.page&&typeof proboards.dataHash.page[key]!="undefined"){return proboards.dataHash.page[key]}return""}}]);return _class11}();yootil.page.board=function(){function _class12(){_classCallCheck(this,_class12)}_createClass(_class12,null,[{key:"__get_data",value:function __get_data(key){var board_obj=yootil.page.__get_data("board");if(board_obj&&(typeof board_obj==="undefined"?"undefined":_typeof(board_obj))=="object"&&board_obj[key]!="undefined"){return board_obj[key]}return""}},{key:"id",value:function id(){return parseInt(this.__get_data("id"),10)||null}},{key:"name",value:function name(){return this.__get_data("name")}},{key:"url",value:function url(){return this.__get_data("url")}},{key:"description",value:function description(){return this.__get_data("description")}},{key:"disable_post_counts",value:function disable_post_counts(){return this.__get_data("disable_post_counts")==1}},{key:"disable_posting",value:function disable_posting(){return this.__get_data("disable_posting")==1}},{key:"display_name",value:function display_name(){return this.__get_data("display_name")}},{key:"hidden",value:function hidden(){return this.__get_data("hidden")==1}},{key:"posts",value:function posts(){return this.__get_data("posts")}},{key:"show_announcements",value:function show_announcements(){return this.__get_data("show_announcements")==1}},{key:"threads",value:function threads(){return this.__get_data("threads")}}]);return _class12}();yootil.page.category=function(){function _class13(){_classCallCheck(this,_class13)}_createClass(_class13,null,[{key:"__get_data",value:function __get_data(key){var cat_obj=yootil.page.__get_data("category");if(cat_obj&&(typeof cat_obj==="undefined"?"undefined":_typeof(cat_obj))=="object"&&cat_obj[key]!="undefined"){return cat_obj[key]}return""}},{key:"id",value:function id(){return parseInt(this.__get_data("id"),10)||null}},{key:"name",value:function name(){return this.__get_data("name")}}]);return _class13}();yootil.page.member=function(){function _class14(){_classCallCheck(this,_class14)}_createClass(_class14,null,[{key:"__get_data",value:function __get_data(key){var member_obj=yootil.page.__get_data("member");if(member_obj&&(typeof member_obj==="undefined"?"undefined":_typeof(member_obj))=="object"&&member_obj[key]!="undefined"){return member_obj[key]}return""}},{key:"id",value:function id(){return parseInt(this.__get_data("id"),10)}},{key:"name",value:function name(){return this.__get_data("name")}},{key:"url",value:function url(){return this.__get_data("url")}},{key:"display_group_id",value:function display_group_id(){return this.__get_data("display_group_id")}},{key:"exists",value:function exists(){return this.id()!=0}}]);return _class14}();yootil.page.post=function(){function _class15(){_classCallCheck(this,_class15)}_createClass(_class15,null,[{key:"__get_data",value:function __get_data(key){var board_obj=yootil.page.__get_data("post");if(board_obj&&(typeof board_obj==="undefined"?"undefined":_typeof(board_obj))=="object"&&board_obj[key]!="undefined"){return board_obj[key]}return""}},{key:"created_by",value:function created_by(){return this.__get_data("created_by")}},{key:"created_on",value:function created_on(){return parseInt(this.__get_data("created_on"),10)}},{key:"id",value:function id(){return parseInt(this.__get_data("id"),10)}},{key:"liked",value:function liked(){return this.__get_data("liked")==1}},{key:"thread_id",value:function thread_id(){return parseInt(this.__get_data("thread_id"),10)}},{key:"url",value:function url(){return this.__get_data("url")}}]);return _class15}();yootil.page.thread=function(){function _class16(){_classCallCheck(this,_class16)}_createClass(_class16,null,[{key:"__get_data",value:function __get_data(key){var thread_obj=yootil.page.__get_data("thread");if(thread_obj&&(typeof thread_obj==="undefined"?"undefined":_typeof(thread_obj))=="object"&&thread_obj[key]!="undefined"){return thread_obj[key]}return""}},{key:"id",value:function id(){return parseInt(this.__get_data("id"),10)}},{key:"created_on",value:function created_on(){return parseInt(this.__get_data("created_on"),10)}},{key:"announcement",value:function announcement(){return this.__get_data("is_announcement")==1}},{key:"bookmarked",value:function bookmarked(){return this.__get_data("is_bookmarked")==1}},{key:"falling",value:function falling(){return this.__get_data("is_falling")==1}},{key:"locked",value:function locked(){return this.__get_data("is_locked")==1}},{key:"fresh",value:function fresh(){return this.__get_data("is_new")==1}},{key:"poll",value:function poll(){return this.__get_data("is_poll")==1}},{key:"sticky",value:function sticky(){return this.__get_data("is_sticky")==1}},{key:"subject",value:function subject(){return this.__get_data("subject")}},{key:"url",value:function url(){return this.__get_data("url")}},{key:"board_id",value:function board_id(){return parseInt(this.__get_data("board_id"),10)}},{key:"created_by",value:function created_by(){return parseInt(this.__get_data("created_by"),10)}},{key:"last_post_id",value:function last_post_id(){return parseInt(this.__get_data("last_post_id"),10)}},{key:"first_post_id",value:function first_post_id(){return parseInt(this.__get_data("first_post_id"),10)}},{key:"last_post_time",value:function last_post_time(){return parseInt(this.__get_data("last_post_time"),10)}}]);return _class16}();yootil.queue=function(){function _class17(){var auto_start=arguments.length<=0||arguments[0]===undefined?false:arguments[0];_classCallCheck(this,_class17);this._queue=[];this._iterator=null;this._started=false;this._auto_start=auto_start}_createClass(_class17,[{key:"add",value:function add(){var func=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(!func){return}this._queue.push(func);if(!this._iterator){this._iterator=this.iterator()}if(this._auto_start&&!this._started){this.start()}return this}},{key:"iterator",value:regeneratorRuntime.mark(function iterator(){return regeneratorRuntime.wrap(function iterator$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!this._stopped&&this._queue.length)){_context.next=6;break}_context.next=3;return this._queue[0](this);case 3:this._queue.shift();_context.next=0;break;case 6:case"end":return _context.stop()}}},iterator,this)})},{key:"next",value:function next(){return this._iterator.next()}},{key:"start",value:function start(){this._started=true;this._iterator.next();return this}},{key:"stop",value:function stop(){this._queue=[];this._stopped=true}},{key:"pause",value:function pause(){this._stopped=true;return this}},{key:"resume",value:function resume(){var do_next=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this._stopped=false;if(do_next){this._iterator.next()}return this}},{key:"clear",value:function clear(){this._queue=[];return this}}]);return _class17}();yootil.settings=function(){function _class18(){_classCallCheck(this,_class18)}_createClass(_class18,null,[{key:"init",value:function init(){this.images={};this.bar={enabled:1,bar_position:4};this.images={}}}]);return _class18}();yootil.storage=function(){function _class19(){_classCallCheck(this,_class19)}_createClass(_class19,null,[{key:"set",value:function set(key){var value=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var json=arguments.length<=2||arguments[2]===undefined?false:arguments[2];var persist=arguments.length<=3||arguments[3]===undefined?true:arguments[3];if(key){value=json&&!yootil.is_json(value)?JSON.stringify(value):value}if(persist){localStorage.setItem(key,value)}else{sessionStorage.setItem(key,value)}return this}},{key:"get",value:function get(key){var json=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var persist=arguments.length<=2||arguments[2]===undefined?true:arguments[2];var value="";if(key){if(persist){value=localStorage.getItem(key)}else{value=sessionStorage.getItem(key)}if(json&&yootil.is_json(value)){value=JSON.parse(value)}}return value}},{key:"remove",value:function remove(key){var persist=arguments.length<=1||arguments[1]===undefined?true:arguments[1];if(key){if(persist){localStorage.removeItem(key)}else{sessionStorage.removeItem(key)}}return this}},{key:"clear",value:function clear(){var persist=arguments.length<=0||arguments[0]===undefined?true:arguments[0];if(persist){localStorage.clear()}else{sessionStorage.clear()}return this}}]);return _class19}();yootil.sync=function(){function _class20(){var key=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var _this5=this;var data=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var options=arguments.length<=2||arguments[2]===undefined?null:arguments[2];_classCallCheck(this,_class20);if(!key){return}this._trigger_caller=false;this._change=options&&typeof options.change!="undefined"?options.change:this.change;this._key=key;this._ls_key=key+"_data_sync_"+yootil.user.id();yootil.storage.set(this._key,data,true,true);setTimeout(function(){return $(window).on("storage",function(evt){if(evt&&evt.originalEvent&&evt.originalEvent.key==_this5._key){if(_this5._trigger_caller){_this5._trigger_caller=false;return}var event=evt.originalEvent;var old_data=event.oldValue;var new_data=event.newValue;if(old_data!=new_data){_this5._change(JSON.parse(new_data),JSON.parse(old_data))}}})},100)}_createClass(_class20,[{key:"update",value:function update(){var data=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this._trigger_caller=true;yootil.storage.set(this._key,data,true,true)}},{key:"change",value:function change(new_data,old_data){var internal_key_data=proboards.plugin.keys.data[this._key];if(internal_key_data){internal_key_data[yootil.user.id()]=new_data}}},{key:"key",get:function get(){return this._key}},{key:"local_key",get:function get(){return this._ls_key}}]);return _class20}();yootil.user=function(){function _class21(){_classCallCheck(this,_class21)}_createClass(_class21,null,[{key:"init",value:function init(){this._data={};return this}},{key:"has_data",value:function has_data(){if(this._data&&typeof this._data.id!="undefined"){return true}else{if(typeof proboards!="undefined"){var data=proboards.data;if(typeof data!="undefined"&&typeof data=="function"){var user_data=proboards.data("user");if(typeof user_data!="undefined"){this._data=user_data||{};return true}}}}return false}},{key:"logged_in",value:function logged_in(){if(this.has_data()){if(typeof this._data.is_logged_in!="undefined"&&this._data.is_logged_in){return true}}return false}},{key:"id",value:function id(){if(this.has_data()){if(typeof this._data.id!="undefined"){return parseInt(this._data.id,10)}}return null}},{key:"staff",value:function staff(){if(this.has_data()){if(typeof this._data.is_staff!="undefined"&&this._data.is_staff){return true}}return false}},{key:"name",value:function name(){if(this.has_data()){if(typeof this._data.name!="undefined"){return this._data.name}}return""}},{key:"theme",value:function theme(){if(this.has_data()){if(typeof this._data.theme_id!="undefined"){return this._data.theme_id}}return 0}},{key:"url",value:function url(){if(this.has_data()){if(typeof this._data.url!="undefined"){return this._data.url}}return""}},{key:"avatar",value:function avatar(){if(this.has_data()){if(typeof this._data.avatar!="undefined"){return this._data.avatar}}return""}},{key:"birthday",value:function birthday(){if(this.has_data()){if(typeof this._data.birthday!="undefined"){return this._data.birthday}}return{}}},{key:"date_format",value:function date_format(){if(this.has_data()){if(typeof this._data.date_format!="undefined"){return this._data.date_format}}return""}},{key:"post_mode",value:function post_mode(){if(this.has_data()){if(typeof this._data.default_post_mode!="undefined"){return this._data.default_post_mode}}return""}},{key:"friends",value:function friends(){if(this.has_data()){if(typeof this._data.friends!="undefined"){return this._data.friends}}return{}}},{key:"has_new_messages",value:function has_new_messages(){if(this.has_data()){if(typeof this._data.has_new_messages!="undefined"){return this._data.has_new_messages}}return 0}},{key:"instant_messengers",value:function instant_messengers(){if(this.has_data()){if(typeof this._data.instant_messengers!="undefined"){return this._data.instant_messengers}}return{}}},{key:"last_online",value:function last_online(){if(this.has_data()){if(typeof this._data.last_online!="undefined"){return this._data.last_online}}return{}}},{key:"posts",value:function posts(){if(this.has_data()){if(typeof this._data.posts!="undefined"){return this._data.posts}}return 0}},{key:"rank",value:function rank(){if(this.has_data()){if(typeof this._data.rank!="undefined"){return this._data.rank}}return{}}},{key:"registered_on",value:function registered_on(){if(this.has_data()){if(typeof this._data.registered_on!="undefined"){return this._data.registered_on}}return{}}},{key:"status",value:function status(){if(this.has_data()){if(typeof this._data.status!="undefined"){return this._data.status}}return""}},{key:"time_format",value:function time_format(){if(this.has_data()){if(typeof this._data.time_format!="undefined"){return this._data.time_format}}return""}},{key:"username",value:function username(){if(this.has_data()){if(typeof this._data.username!="undefined"){return this._data.username}}return""}},{key:"group_ids",value:function group_ids(){if(this.has_data()){if(typeof this._data.group_ids!="undefined"){return this._data.group_ids}}return[]}},{key:"groups",value:function groups(){if(this.has_data()){if(typeof this._data.groups!="undefined"){return this._data.groups}}return{}}},{key:"invisible",value:function invisible(){if(this.has_data()){if(typeof this._data.is_invisible!="undefined"&&this._data.is_invisible){return true}}return false}},{key:"proboards_plus",value:function proboards_plus(){if(this.has_data()){if(typeof this._data.proboards_plus!="undefined"&&this._data.proboards_plus){return true}}return false}},{key:"block_list",value:function block_list(){if(this.has_data()){if(typeof this._data.block_list!="undefined"&&this._data.block_list){return this._data.block_list}}return{}}}]);return _class21}().init();yootil.init();